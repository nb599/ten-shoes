# Lighthouse CI é›†æˆæŒ‡å—

## æ¦‚è¿°

å¤©ä¹¦åšå®¢å·²é›†æˆ Lighthouse CIï¼Œç”¨äºè‡ªåŠ¨åŒ–æ€§èƒ½ã€å¯è®¿é—®æ€§ã€SEO å’Œæœ€ä½³å®è·µçš„ç›‘æ§ã€‚

## é…ç½®è¯´æ˜

### æµ‹è¯•é¡µé¢
- ğŸ  é¦–é¡µ (`/`)
- ğŸ“„ AI å‰ç«¯æŠ€æœ¯æ–‡ç«  (`/blog/ai-features-in-frontend`)
- ğŸ“„ Agent UI è®¾è®¡æ¨¡å¼æ–‡ç«  (`/blog/agent-ui-patterns`)
- ğŸ” ç™»å½•é¡µ (`/login`)
- ğŸ“ æ³¨å†Œé¡µ (`/register`)

### æµ‹è¯•ç¯å¢ƒ
- **ç§»åŠ¨ç«¯**: æ¨¡æ‹Ÿ 3G ç½‘ç»œï¼Œç§»åŠ¨è®¾å¤‡
- **æ¡Œé¢ç«¯**: å¿«é€Ÿç½‘ç»œï¼Œæ¡Œé¢è®¾å¤‡
- **è¿è¡Œæ¬¡æ•°**: æ¯ä¸ªé¡µé¢ 3 æ¬¡ï¼Œå–ä¸­ä½æ•°

## æ€§èƒ½é¢„ç®—

### ç§»åŠ¨ç«¯é˜ˆå€¼
| åˆ†ç±» | æœ€ä½åˆ†æ•° | çº§åˆ« |
|------|----------|------|
| æ€§èƒ½ | 70 | Warning |
| å¯è®¿é—®æ€§ | 90 | Error |
| æœ€ä½³å®è·µ | 80 | Warning |
| SEO | 90 | Error |

### æ¡Œé¢ç«¯é˜ˆå€¼
| åˆ†ç±» | æœ€ä½åˆ†æ•° | çº§åˆ« |
|------|----------|------|
| æ€§èƒ½ | 80 | Warning |
| å¯è®¿é—®æ€§ | 95 | Error |
| æœ€ä½³å®è·µ | 90 | Warning |
| SEO | 95 | Error |

### Core Web Vitals

#### ç§»åŠ¨ç«¯
- **FCP (First Contentful Paint)**: â‰¤ 2000ms
- **LCP (Largest Contentful Paint)**: â‰¤ 2500ms  
- **CLS (Cumulative Layout Shift)**: â‰¤ 0.1
- **TBT (Total Blocking Time)**: â‰¤ 300ms

#### æ¡Œé¢ç«¯
- **FCP**: â‰¤ 1200ms
- **LCP**: â‰¤ 1500ms
- **CLS**: â‰¤ 0.05  
- **TBT**: â‰¤ 150ms

## æœ¬åœ°è¿è¡Œ

### ç§»åŠ¨ç«¯æµ‹è¯•
\`\`\`bash
npm run lhci
\`\`\`

### æ¡Œé¢ç«¯æµ‹è¯•  
\`\`\`bash
npm run lhci:desktop
\`\`\`

### æ„å»ºåæµ‹è¯•
\`\`\`bash
npm run build
npm start
# åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œ
npm run lhci
\`\`\`

## CI/CD é›†æˆ

Lighthouse CI åœ¨ä»¥ä¸‹æƒ…å†µè‡ªåŠ¨è¿è¡Œï¼š
- æ¨é€åˆ° `main` æˆ– `develop` åˆ†æ”¯
- æäº¤ Pull Request åˆ° `main` åˆ†æ”¯

### GitHub Actions å·¥ä½œæµ
1. **lighthouse-mobile**: ç§»åŠ¨ç«¯æ€§èƒ½æµ‹è¯•
2. **lighthouse-desktop**: æ¡Œé¢ç«¯æ€§èƒ½æµ‹è¯•  
3. **performance-budget-check**: æ€§èƒ½é¢„ç®—æ£€æŸ¥å’ŒæŠ¥å‘Šç”Ÿæˆ

### ç¯å¢ƒå˜é‡
- `LHCI_GITHUB_APP_TOKEN`: Lighthouse CI GitHub App Token (å¯é€‰)
- `AUTH_SECRET`: JWT ç­¾åå¯†é’¥
- `DATABASE_URL`: æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸² (å¯é€‰)

## ç»“æœæŸ¥çœ‹

### GitHub Actions
- åœ¨ Actions é¡µé¢æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
- ä¸‹è½½æ„ä»¶æŸ¥çœ‹å®Œæ•´çš„ Lighthouse æŠ¥å‘Š
- æŸ¥çœ‹ Job Summary è·å–æ€§èƒ½æ¦‚è§ˆ

### æœ¬åœ°ç»“æœ
ç»“æœä¿å­˜åœ¨ `.lighthouseci/` ç›®å½•ï¼š
- HTML æŠ¥å‘Š: `.lighthouseci/lhr-*.html`  
- JSON æ•°æ®: `.lighthouseci/lhr-*.json`

## ä¼˜åŒ–å»ºè®®

### æ€§èƒ½ä¼˜åŒ–
- ä½¿ç”¨ Next.js Image ç»„ä»¶ä¼˜åŒ–å›¾ç‰‡
- å¯ç”¨ gzip/brotli å‹ç¼©
- å®æ–½ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
- ä¼˜åŒ–å­—ä½“åŠ è½½ç­–ç•¥

### å¯è®¿é—®æ€§ä¼˜åŒ–
- ä¸ºæ‰€æœ‰å›¾ç‰‡æ·»åŠ  alt å±æ€§
- ç¡®ä¿è¶³å¤Ÿçš„é¢œè‰²å¯¹æ¯”åº¦
- ä¸ºè¡¨å•å…ƒç´ æ·»åŠ æ­£ç¡®çš„æ ‡ç­¾
- å®æ–½é”®ç›˜å¯¼èˆªæ”¯æŒ

### SEO ä¼˜åŒ–
- æ·»åŠ  meta æè¿°å’Œæ ‡é¢˜
- å®æ–½ç»“æ„åŒ–æ•°æ®
- ä¼˜åŒ– URL ç»“æ„
- æ·»åŠ  robots.txt å’Œ sitemap

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **æœåŠ¡å™¨å¯åŠ¨è¶…æ—¶**: å¢åŠ  `startServerReadyTimeout`
2. **é¢„ç®—è¶…æ ‡**: æ£€æŸ¥èµ„æºå¤§å°å’Œæ•°é‡
3. **å¯è®¿é—®æ€§å¤±è´¥**: æ£€æŸ¥é¢œè‰²å¯¹æ¯”åº¦å’Œ ARIA å±æ€§

### è°ƒè¯•æŠ€å·§
\`\`\`bash
# è¯¦ç»†è¾“å‡º
npx lhci autorun --verbose

# å•ç‹¬è¿è¡Œæ”¶é›†æ­¥éª¤
npx lhci collect --numberOfRuns=1

# æŸ¥çœ‹é…ç½®
npx lhci healthcheck
